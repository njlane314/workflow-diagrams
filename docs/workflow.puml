@startuml LArSoft_Workflow
title LArSoft Reconstruction â€“ Component View

skinparam componentStyle rectangle
skinparam stereotype {
  CBackgroundColor<<Producer>>  #DFF5E1
  CBackgroundColor<<Filter>>    #FFEBD6
  CBackgroundColor<<Analyzer>>  #E7E9FF
  CBackgroundColor<<Service>>   #F4F4F4
}
skinparam rectangle {
  BorderColor #888
  RoundCorner 8
}
legend left
  <<Producer>>  makes data products
  <<Filter>>    gates the path based on Event
  <<Analyzer>>  reads, writes ntuples/plots
  (dp)          data product type
endlegend

package "Event (art::Event)" {
  () "raw::RawDigit" as RawDigit
  () "recob::Wire"   as Wire
  () "recob::Hit"    as Hit
  () "recob::Cluster" as Cluster
  () "recob::PFParticle" as PF
  () "recob::Track/recob::Shower" as TrSh
  () "anab::Calorimetry" as Calo
}

component "SignalProcessing" <<Producer>> as SigProc
component "HitFinding"      <<Producer>> as HitFinder
component "Clustering"      <<Producer>> as Clustering
component "Pandora"         <<Producer>> as Pandora
component "Track/Shower"    <<Producer>> as TrackShower
component "Calorimetry"     <<Producer>> as CaloProd
component "MySelection"     <<Filter>>   as MySel
component "AnalysisNtuple"  <<Analyzer>> as Ana

' Services used (optional)
component "Geometry\nDetectorClocks\nLArProperties" <<Service>> as Svc

' Reads/produces wiring
SigProc   -down-> Wire : produces
RawDigit  -up->  SigProc : reads

HitFinder -down-> Hit : produces
Wire      -up->  HitFinder : reads

Clustering -down-> Cluster : produces
Hit        -up->  Clustering : reads

Pandora -down-> PF : produces
Cluster -up-> Pandora : reads
Hit     -up-> Pandora : reads

TrackShower -down-> TrSh : produces
PF          -up-> TrackShower : reads

CaloProd -down-> Calo : produces
TrSh     -up-> CaloProd : reads

MySel -right-> Ana : passes
Calo  -up-> MySel : reads
TrSh  -up-> MySel : reads
Hit   -up-> MySel : reads
@enduml
